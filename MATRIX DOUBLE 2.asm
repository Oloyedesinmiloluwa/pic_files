TMR0	EQU	1
PC		EQU	2
STATUS	EQU	3
PORTA	EQU	5
PORTB	EQU	6
PORTC	EQU	7
PORTD	EQU	8
PORTE	EQU	9
TRISA	EQU	85H
TRISB	EQU	86H
TRISC	EQU	87H
TRISD	EQU	88H
TRISE	EQU	89H
OPTION_R	EQU 81H
ZEROBIT	EQU	2
CCP1CON	EQU	17H
INTCON	EQU 0BH
GIE		EQU	7
PIE1	EQU	8CH
PIR1	EQU	0CH
PEIE	EQU	6
CCP1IF	EQU	2
CCP1IE	EQU	2
EDGE	EQU	0
READY	EQU	1
EEDATA		EQU	0CH
EEADR		EQU	0DH
EECON1		EQU	8CH
EECON2		EQU	8DH
RD EQU 0 ;read bit in EECON1
WR EQU 1 ;Write bit in EECON1
WREN EQU 2
COUNT	EQU	20H
C1		EQU	21H
C2		EQU	22H
C3		EQU	23H
C4		EQU	24H
C5		EQU	25H
DISP1	EQU	26H
DISP2	EQU	27H
DISP3	EQU	28H
DISP4	EQU	29H
DISP5	EQU	30H
DISP6	EQU	31H
DISP7	EQU	32H	
DISP8	EQU	33H
DISP9	EQU	34H
DISP10	EQU	35H
DISP11	EQU	36H
DISP12	EQU	37H
DISP13	EQU	38H
DISP14	EQU	39H
DISP15	EQU	40H
DISP16	EQU	41H
DISP17	EQU	42H	
DISP18	EQU	43H
DISP19	EQU	44H
DISP20	EQU	45H
DISP21	EQU	46H
DISP22	EQU	47H
DISP23	EQU	48H
DISP24	EQU	49H
DISP25	EQU	50H
DISP26	EQU	51H
DISP27	EQU	52H	
DISP28	EQU	53H
DISP29	EQU	54H
DISP30	EQU	55H
DISP31	EQU	56H
DISP32		EQU	57H
DISP33		EQU	58H
DISP34		EQU	59H
DISP35		EQU	60H
DISP36		EQU	61H
DISP37		EQU	62H
DISP38		EQU	63H
DISP39		EQU	64H
DISP40		EQU	65H
STILL	EQU	66H
COUNT1	EQU	67H
DISP	EQU	68H

TSTATUS		EQU	69H
TW		EQU	6AH
TPORTB		EQU	6BH
TNUM	EQU	6CH		

COUNTER		EQU	6DH
NUM		EQU	6EH
COUNTER2 EQU	6FH
FLAG	EQU		2AH
ALPHA	EQU		2BH
DELAYCOUNT	EQU	2CH	
SHIFTCOUNT	EQU	2DH	
STORE	EQU		2EH
TTMR0	EQU		2FH
FILE1	EQU		3AH
FILE2	EQU		3BH
FILE3	EQU		3CH	
FILE4	EQU		3DH
FILE5	EQU		3EH
FILE6	EQU		3FH
FILE7	EQU		4AH
FILE8	EQU		4BH
FILE9	EQU		4CH
FILE10	EQU		4DH;REMOVE
FILE11	EQU		4EH
FILE12	EQU		4FH
FILE13	EQU		5AH
FILE14	EQU		5BH
FILE15	EQU		5CH
FILE16	EQU		5DH	
FILE17	EQU		5EH
FILE18	EQU		5FH
FILE19	EQU		7AH
FILE20	EQU		7BH
FILE21	EQU		7CH
FILE22	EQU		7DH
FILE23	EQU		7EH
FILE24	EQU		7FH
FILE25	EQU		0A0H
FILE26	EQU		0A1H
FILE27	EQU		0A2H
FILE28	EQU		0A3H
FILE29	EQU		0A4H
FILE30	EQU		0A5H


	LIST	P=16F877A
	ORG		2100H
	DE		00H
	ORG		0
	GOTO	START
	ORG		4
	GOTO	ISR
	__CONFIG	H'3F3A'
;SUBROUTINE
DELAYP15 CLRF TMR0 ;START TMR0.
LOOPB MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .2 ;TIME-3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPB ;Time is not ¼ 3.
	RETLW 0

ISR		MOVWF	TW
		SWAPF	STATUS,W
		MOVWF	TSTATUS
		INCF	COUNTER		
;		MOVF	COUNTER,W
;		SUBLW	.30
;		BTFSC	STATUS,ZEROBIT
;		CLRF	COUNTER
RESTORE

		SWAPF	TSTATUS,W
		MOVWF	STATUS

		MOVF	TW,W
		BCF		PIR1,CCP1IF
		BSF		FLAG,0
		RETFIE
DELAYWAIT MOVLW	.255			;for waiti
		MOVWF	DELAYCOUNT
DEL3	DECFSZ	DELAYCOUNT
		GOTO 	DELAY4
		RETLW  	.0
DELAYP5 CLRF TMR0 ;START TMR0.
LOOPe MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .2	;3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPe ;Time is not ¼ 3.
	RETLW 0
		
DELAY4 CLRF TMR0 ;START TMR0.
LOOPC MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .255 ;TIME-3
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPC ;Time is not ¼ 3.
	GOTO DEL3
;TO STORE INTO FILE
	
		W0	MOVLW	B'10000000'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
			
		W1
			MOVLW	B'01000000'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
			
		W2	
			MOVLW	B'00100000'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
			
		W3	
			MOVLW	B'00010000'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
		
		W4	
			MOVLW	B'00001000'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
			
		W5			
			MOVLW	B'00000100'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
		W6	
			MOVLW	B'00000010'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN		
		W7			
			MOVLW	B'00000001'
			MOVWF	PORTD
			BCF		FLAG,0
			GOTO	BEGIN
			
			
		W8	
			CLRF	PORTD
			MOVLW	B'00000001'
			MOVWF	PORTA
			BCF		FLAG,0
			GOTO	BEGIN
			
		W9			
			MOVLW	B'00000010'
			MOVWF	PORTA
			BCF		FLAG,0
			GOTO	BEGIN
			
		W10	
			MOVLW	B'00000100'
			MOVWF	PORTA
			BCF		FLAG,0
			GOTO	BEGIN
		W11	
			MOVLW	B'00001000'
			MOVWF	PORTA
			BCF		FLAG,0
			GOTO	BEGIN
		W12	
			MOVLW	B'00010000'
			MOVWF	PORTA
			BCF		FLAG,0
			GOTO	BEGIN
		
		W13	
			MOVLW	B'00100000'
			MOVWF	PORTA
			BCF		FLAG,0
			GOTO	BEGIN
		
			
		W14	
			CLRF	PORTA
			MOVLW	B'10000000'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
			
		W15	
			MOVLW	B'01000000'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
			
		W16	
			MOVLW	B'00100000'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
			
		W17	
			MOVLW	B'00010000'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
		
		W18
			MOVLW	B'00001000'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
			
		W19	CLRF	PORTC
			MOVLW	B'00000010'		;THERE IS A JUMP TO E 
			MOVWF	PORTE
			BCF		FLAG,0
			GOTO	BEGIN
			
		W20	CLRF	PORTE
			MOVLW	B'00000010'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
		W21	
			MOVLW	B'00000001'
			MOVWF	PORTC
			BCF		FLAG,0
			GOTO	BEGIN
		
		
		W22	CLRF	PORTC
			MOVLW	B'10000000'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
		W23	
			MOVLW	B'01000000'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
		
		W24	
			MOVLW	B'00100000'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
			
		W25	
			MOVLW	B'00010000'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
			
		W26	
			MOVLW	B'00001000'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
			
		W27	
			MOVLW	B'00000100'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
			
		W28	
			MOVLW	B'00000010'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
			
		W29	
			MOVLW	B'00000001'
			MOVWF	PORTB
			BCF		FLAG,0
			GOTO	BEGIN
			
		W30	
			CLRF	PORTB
			CLRF	COUNTER
			BCF		FLAG,0
			GOTO	BEGIN





START	
		BSF		STATUS,5
		MOVLW	.0
		MOVWF	TRISB
		MOVLW	.0
		MOVWF	TRISD
		MOVLW	.0
		MOVWF	TRISA
		MOVLW	.4
		MOVWF	TRISC
		
		MOVLW	.0
		MOVWF	TRISE
		MOVLW	05H
		MOVWF	OPTION_R
		BSF		PIE1,CCP1IE
	
		CLRF	STATUS
		CLRF	PORTA
		CLRF	PORTB
		CLRF	PORTC
		CLRF	PORTD		
		CLRF	PORTE
	
	;	BSF		INTCON,4 ;INT ENABLE
		CLRF	COUNTER
		CLRF	COUNTER2
		CLRF	NUM
		CLRF	FLAG
		CLRF	STORE
		CLRF	SHIFTCOUNT
		MOVLW	.4
		MOVWF	CCP1CON
		CLRF	INTCON
		
		BCF		PIR1,CCP1IF
		BSF		INTCON,GIE
		BSF		INTCON,PEIE
	
	;		BCF	INTCON,1
;	BSF		INTCON,GIE
	;	BCF		PIR1,CCP1IF
	
;PROGRAM STARTS
	;	BSF		PORTB,1
	;	BTFSS	PORTE,0		; input
	;	GOTO	BEGIN
BEGIN
		BTFSS	FLAG,0
		GOTO	BEGIN
		MOVF	COUNTER,W
		ADDWF	PC
		GOTO	BEGIN
		GOTO	W0
		GOTO	W1
		GOTO	W2
		GOTO	W3
		GOTO	W4
		GOTO	W5
		GOTO	W6
		GOTO	W7
		GOTO	W8
		GOTO	W9
		GOTO	W10
		GOTO	W11
		GOTO	W12
		GOTO	W13
		GOTO	W14
		GOTO	W15
		GOTO	W16
		GOTO	W17
		GOTO	W18
		GOTO	W19
		GOTO	W20
		GOTO	W21
		GOTO	W22
		GOTO	W23
		GOTO	W24
		GOTO	W25
		GOTO	W26
		GOTO	W27
		GOTO	W28
		GOTO	W29
		GOTO	W30
		


		END