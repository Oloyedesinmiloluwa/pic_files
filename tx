TMR0	EQU	1
PC		EQU	2
STATUS	EQU	3
PORTA	EQU	5
PORTB	EQU	6
PORTC	EQU	7
PORTD	EQU	8
PORTE	EQU	9
TRISA	EQU	85H
TRISB	EQU	86H
TRISC	EQU	87H
TRISD	EQU	88H
TRISE	EQU	89H
OPTION_R	EQU 81H
ZEROBIT	EQU	2

RCSTA	EQU 18H
TXSTA	EQU	98H
SPBRG	EQU	99H
TXIE	EQU	4
RCIE	EQU	5
CREN	EQU	4
TXEN	EQU	5
TXIF	EQU 4
RCIF	EQU	5
TXREG	EQU	19H
RCREG	EQU	1AH
FRAME	EQU	0
FERR	EQU	2		
COUNT	EQU	20H
RECV	EQU	21H
FLAG	EQU	22H
	LIST	P=16F877A

	ORG		0
	GOTO	START
	__CONFIG	H'3F3A'
;SUBROUTINE
DELAYP15 CLRF TMR0 ;START TMR0.
LOOPB MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .2 ;TIME-3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPB ;Time is not ¼ 3.
	RETLW 0
	
START
BSF		STATUS,5
		MOVLW	.1
		MOVWF	TRISB
		MOVLW	.0
		MOVWF	TRISA
		MOVLW	B'10000000'
		MOVWF	TRISC
;		BSF		TRISC,7    ;receive	INPUT
;		BCF		TRISC,6		;transmit OUTPUT
		MOVLW	.0
		MOVWF	TRISD
		MOVLW	.0
		MOVWF	TRISE
		MOVLW	07H
		MOVWF	OPTION_R
		CLRF	STATUS
		CLRF	PORTA
		CLRF	PORTB
		CLRF	PORTC
		CLRF	PORTD		
		CLRF	PORTE	
		CLRF	FLAG
		BSF		STATUS,5
		MOVLW	.12
		MOVWF	SPBRG; FOR BAUD RATE
		MOVLW	14H;B'00101000' trasmit ealed high speed
		MOVWF	TXSTA
	;	BSF		PIE1,TXIE
	;	BSF		PIE1,RCIE
		CLRF	STATUS
		CLRF	INTCON
	;	MOVLW	90H	;10010000
	;	MOVWF	RCSTA
	;	BSF		INTCON,GIE
	;	BSF		INTCON,PEIE

WAITT	BTFSC	PORTB,0
		GOTO	WAITT
		BSF		PORTB,1
		MOVLW	55H
		MOVWF	TXREG		;SEND DATA
	;	BSF		PIR1,TXIF
	WAIT	BTFSS	PIR1,TXIF
			GOTO	WAIT
	QAIT	MOVLW	03FH
			MOVWF	PORTB
			GOTO	QAIT
	END