TMR0	EQU	1
PC		EQU	2
STATUS	EQU	3
PORTA	EQU	5
PORTB	EQU	6
PORTC	EQU	7
PORTD	EQU	8
PORTE	EQU	9
TRISA	EQU	85H
TRISB	EQU	86H
TRISC	EQU	87H
TRISD	EQU	88H
TRISE	EQU	89H
OPTION_R	EQU 81H
ZEROBIT	EQU	2
;CCP1CON	EQU	17H
INTCON	EQU 0BH
GIE		EQU	7
PIE1	EQU	8CH
PIR1	EQU	0CH
PEIE	EQU	6
CCP1IF	EQU	2
CCP1IE	EQU	2
EDGE	EQU	0
READY	EQU	1
EEDATA		EQU	0CH
EEADR		EQU	0DH
EECON1		EQU	8CH
EECON2		EQU	8DH
RD EQU 0 ;read bit in EECON1
WR EQU 1 ;Write bit in EECON1
WREN EQU 2
RCSTA	EQU 18H
TXSTA	EQU	98H
SPBRG	EQU	99H
TXIE	EQU	4
RCIE	EQU	5
CREN	EQU	4
TXEN	EQU	5
TXIF	EQU 4
RCIF	EQU	5
TXREG	EQU	19H
RCREG	EQU	1AH
FRAME	EQU	0
FERR	EQU	2		
COUNT	EQU	20H
RECV	EQU	21H
FLAG	EQU	22H
C3		EQU	23H
C4		EQU	24H
C5		EQU	25H
DISP1	EQU	26H
TSTATUS		EQU	69H
TW		EQU	6AH
TPORTB		EQU	6BH
TNUM	EQU	6CH		
COUNTER		EQU	6DH
NUM		EQU	6EH
COUNTER2 EQU	6FH
ALPHA	EQU		2BH
DELAYCOUNT	EQU	2CH	
SHIFTCOUNT	EQU	2DH	
STORE	EQU		2EH
FILE1	EQU		3AH
FILE2	EQU		3BH

	LIST	P=16F877A
	ORG		0
	GOTO	START
	__CONFIG	H'3F3A'
;SUBROUTINE
DELAYP15 CLRF TMR0 ;START TMR0.
LOOPB MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .2 ;TIME-3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPB ;Time is not ¼ 3.
	RETLW 0


DELAYWAIT MOVLW	.255			;for waiti
		MOVWF	DELAYCOUNT
DEL3	DECFSZ	DELAYCOUNT
		GOTO 	DELAY4
		RETLW  	.0
DELAYP5 CLRF TMR0 ;START TMR0.
LOOPe MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .253	;3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPe ;Time is not ¼ 3.
	RETLW 0
		
DELAY4 CLRF TMR0 ;START TMR0.
LOOPC MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .255 ;TIME-3
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPC ;Time is not ¼ 3.
	GOTO DEL3

CARRIAGE	CALL	SLASH
			CALL	rr
			CALL	SLASH
			CALL	n
			RETURN

START	
		BSF		STATUS,5
		MOVLW	.1
		MOVWF	TRISB
		MOVLW	B'10000000'
		MOVWF	TRISC
;		BSF		TRISC,7    ;receive	INPUT
;		BCF		TRISC,6		;transmit OUTPUT
		MOVLW	07H
		MOVWF	OPTION_R
		CLRF	STATUS
		CLRF	PORTB
		CLRF	PORTC	
		CLRF	FLAG
		BSF		STATUS,5
		MOVLW	.64
		MOVWF	SPBRG; FOR BAUD RATE
		MOVLW	34H;B'00110100' trasmit ealed high speed
		MOVWF	TXSTA
	;	BSF		PIE1,TXIE
	;	BSF		PIE1,RCIE
		CLRF	STATUS
		CLRF	INTCON
		MOVLW	90H	;10010000
		MOVWF	RCSTA
	;	BSF		INTCON,GIE
	;	BSF		INTCON,PEIE

WAITT	BTFSC	PORTB,0
		GOTO	WAITT
		BSF		PORTB,1
		MOVLW	55H
		MOVWF	TXREG		;SEND DATA


	END