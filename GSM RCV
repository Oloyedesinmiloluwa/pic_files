TMR0	EQU	1
PC		EQU	2
STATUS	EQU	3
PORTA	EQU	5
PORTB	EQU	6
PORTC	EQU	7
PORTD	EQU	8
PORTE	EQU	9
TRISA	EQU	85H
TRISB	EQU	86H
TRISC	EQU	87H
TRISD	EQU	88H
TRISE	EQU	89H
OPTION_R	EQU 81H
ZEROBIT	EQU	2
CCP1CON	EQU	17H
INTCON	EQU 0BH
GIE		EQU	7
PIE1	EQU	8CH
PIR1	EQU	0CH
PEIE	EQU	6
CCP1IF	EQU	2
CCP1IE	EQU	2
EDGE	EQU	0
READY	EQU	1
EEDATA		EQU	0CH
EEADR		EQU	0DH
EECON1		EQU	8CH
EECON2		EQU	8DH
RD EQU 0 ;read bit in EECON1
WR EQU 1 ;Write bit in EECON1
WREN EQU 2
RCSTA	EQU 18H
TXSTA	EQU	98H
RCIE	EQU	5
CREN	EQU	4
TXEN	EQU	5
RCIF	EQU	5
TXREG	EQU	19H
RCREG	EQU	1AH
TXIF	EQU	4
FRAME	EQU	0
FERR	EQU	2


		

COUNT	EQU	20H
RECV	EQU	21H
FLAG	EQU	22H
C3		EQU	23H
C4		EQU	24H
C5		EQU	25H
DISP1	EQU	26H

TSTATUS		EQU	69H
TW		EQU	6AH
TPORTB		EQU	6BH
TNUM	EQU	6CH		

COUNTER		EQU	6DH
NUM		EQU	6EH
COUNTER2 EQU	6FH
FLAG	EQU		2AH
ALPHA	EQU		2BH
DELAYCOUNT	EQU	2CH	
SHIFTCOUNT	EQU	2DH	
STORE	EQU		2EH

FILE1	EQU		3AH
FILE2	EQU		3BH


	LIST	P=16F877A

	ORG		0
	GOTO	START
	ORG		4
	GOTO	ISR
	__CONFIG	H'3F3A'
;SUBROUTINE
DELAYP15 CLRF TMR0 ;START TMR0.
LOOPB MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .2 ;TIME-3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPB ;Time is not ¼ 3.
	RETLW 0


DELAYWAIT MOVLW	.255			;for waiti
		MOVWF	DELAYCOUNT
DEL3	DECFSZ	DELAYCOUNT
		GOTO 	DELAY4
		RETLW  	.0
DELAYP5 CLRF TMR0 ;START TMR0.
LOOPe MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .3	;3  195
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPe ;Time is not ¼ 3.
	RETLW 0
		
DELAY4 CLRF TMR0 ;START TMR0.
LOOPC MOVF TMR0,W ;READ TMR0 INTO W.
		SUBLW .255 ;TIME-3
	BTFSS STATUS,ZEROBIT ;Check TIME-W ¼ 0
	GOTO LOOPC ;Time is not ¼ 3.
	GOTO DEL3

START	
		BSF		STATUS,5
		MOVLW	.1
		MOVWF	TRISB
		MOVLW	.0
		MOVWF	TRISA
		BSF		TRISC,7
		BCF		TRISC,6
		MOVLW	.0
		MOVWF	TRISD
		MOVLW	.0
		MOVWF	TRISE
		MOVLW	00H
		MOVWF	OPTION_R
		BSF		PIE1,CCP1IE
		CLRF	STATUS
		CLRF	PORTA
		CLRF	PORTC
		CLRF	PORTD		
		CLRF	PORTE	
		CLRF	FLAG
	
		BCF		PIR1,RCIF
		MOVLW	80H
		MOVWF	RCSTA	; RECEIVE MODE
		BSF		STATUS,5
		MOVLW	12
		MOVWF	TXSTA	; FOR BAUD RATE
		BSF		PIE1,RCIE; RECEIVE INTERRUPT ENABLE BIT
		CLRF	STATUS
		BSF		INTCON,GIE
		BSF		INTCON,PEIE
		BSF		RCSTA,CREN
		BSF		TXSTA,TXEN	;ENABLE TRANSMITTER
	
		MOVLW	0F0H
		MOVWF	TXREG		;SEND DATA
	WAIT	BTFSS	PIR1,TXIF
			GOTO	WAIT
		